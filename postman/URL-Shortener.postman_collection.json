{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "URL Shortener API",
		"description": "A high-performance URL shortener service built with Go, following Clean Architecture and DDD principles.\n\n## Features\n- Shorten long URLs\n- Custom short keys\n- URL expiration\n- Visit tracking\n- Rate limiting\n\n## API Endpoints\n- POST / - Create short URL\n- GET /s/:key - Redirect to long URL\n- GET /stats/:key - Get URL statistics\n- GET /health - Health check\n- GET /web - Web UI\n\n## Base URL\nhttp://localhost:8080",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has correct structure\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('status');",
							"    pm.expect(jsonData).to.have.property('service');",
							"    pm.expect(jsonData.status).to.eql('healthy');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/health",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"health"
					]
				},
				"description": "Check if the service is healthy and running."
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"status\": \"healthy\",\n    \"service\": \"url-shortener\"\n}"
				}
			]
		},
		{
			"name": "Shorten URL",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Response has short_key\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('short_key');",
							"    pm.expect(jsonData).to.have.property('short_url');",
							"    pm.expect(jsonData).to.have.property('long_url');",
							"    ",
							"    // Save short_key for other requests",
							"    pm.environment.set(\"short_key\", jsonData.short_key);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"long_url\": \"https://www.example.com/very/long/url/path/that/needs/to/be/shortened\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				},
				"description": "Create a short URL from a long URL. Send a POST request to the root endpoint (/) with a JSON payload containing the long_url. The service will generate a unique short key automatically. Optional parameters: custom_key, expires_in."
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"long_url\": \"https://www.example.com/very/long/url\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"short_url\": \"http://localhost:8080/abc123\",\n    \"short_key\": \"abc123\",\n    \"long_url\": \"https://www.example.com/very/long/url\",\n    \"created_at\": \"2025-12-29T10:00:00Z\"\n}"
				}
			]
		},
		{
			"name": "Shorten URL with Custom Key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Custom key is used\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.short_key).to.eql(\"mylink\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"long_url\": \"https://www.github.com/Shofyan/url-shortener\",\n    \"custom_key\": \"mylink\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				},
				"description": "Create a short URL with a custom short key of your choice."
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"long_url\": \"https://www.github.com/Shofyan/url-shortener\",\n    \"custom_key\": \"mylink\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"short_url\": \"http://localhost:8080/mylink\",\n    \"short_key\": \"mylink\",\n    \"long_url\": \"https://www.github.com/Shofyan/url-shortener\",\n    \"created_at\": \"2025-12-29T10:00:00Z\"\n}"
				},
				{
					"name": "Custom Key Already Exists",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"long_url\": \"https://www.example.com\",\n    \"custom_key\": \"mylink\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						}
					},
					"status": "Conflict",
					"code": 409,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"custom_key_exists\",\n    \"message\": \"custom short key already exists\"\n}"
				}
			]
		},
		{
			"name": "Shorten URL with Expiration",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Response has expiration\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('expires_at');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"long_url\": \"https://www.example.com/temporary-link\",\n    \"expires_in\": 86400\n}"
				},
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				},
				"description": "Create a short URL that expires after a specified time (in seconds). Example: 86400 = 24 hours."
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"long_url\": \"https://www.example.com/temporary-link\",\n    \"expires_in\": 86400\n}"
						},
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"short_url\": \"http://localhost:8080/xyz789\",\n    \"short_key\": \"xyz789\",\n    \"long_url\": \"https://www.example.com/temporary-link\",\n    \"created_at\": \"2025-12-29T10:00:00Z\",\n    \"expires_at\": \"2025-12-30T10:00:00Z\"\n}"
				}
			]
		},
		{
			"name": "Redirect to Long URL",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 302 (redirect)\", function () {",
							"    pm.response.to.have.status(302);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/s/{{short_key}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"s",
						"{{short_key}}"
					]
				},
				"description": "Redirect to the original long URL using the short key. Access via GET /s/:shortKey where :shortKey is the generated or custom key. Returns a 302 redirect to the original URL."
			},
			"response": [
				{
					"name": "Redirect Success",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/s/abc123",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"s",
								"abc123"
							]
						}
					},
					"status": "Found",
					"code": 302,
					"_postman_previewlanguage": "plain",
					"header": [
						{
							"key": "Location",
							"value": "https://www.example.com/very/long/url"
						}
					],
					"cookie": [],
					"body": ""
				},
				{
					"name": "URL Not Found",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/s/invalid",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"s",
								"invalid"
							]
						}
					},
					"status": "Not Found",
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"not_found\",\n    \"message\": \"URL not found\"\n}"
				},
				{
					"name": "URL Expired",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/s/expired",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"s",
								"expired"
							]
						}
					},
					"status": "Gone",
					"code": 410,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"url_expired\",\n    \"message\": \"URL has expired\"\n}"
				}
			]
		},
		{
			"name": "Get URL Statistics",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has statistics\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('short_key');",
							"    pm.expect(jsonData).to.have.property('long_url');",
							"    pm.expect(jsonData).to.have.property('visit_count');",
							"    pm.expect(jsonData).to.have.property('created_at');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/stats/{{short_key}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"stats",
						"{{short_key}}"
					]
				},
				"description": "Get statistics for a short URL including visit count, creation time, and expiration (if set). Access via GET /stats/:shortKey where :shortKey is the generated or custom key."
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/stats/abc123",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"stats",
								"abc123"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"short_key\": \"abc123\",\n    \"long_url\": \"https://www.example.com/very/long/url\",\n    \"visit_count\": 42,\n    \"created_at\": \"2025-12-29T10:00:00Z\"\n}"
				},
				{
					"name": "Not Found",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/stats/invalid",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"stats",
								"invalid"
							]
						}
					},
					"status": "Not Found",
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"not_found\",\n    \"message\": \"URL not found\"\n}"
				}
			]
		},
		{
			"name": "Invalid URL Format",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {",
							"    pm.response.to.have.status(400);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"long_url\": \"not-a-valid-url\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				},
				"description": "Example of error handling when an invalid URL is provided."
			},
			"response": [
				{
					"name": "Bad Request",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"long_url\": \"not-a-valid-url\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"invalid_request\",\n    \"message\": \"invalid URL format\"\n}"
				}
			]
		},
		{
			"name": "Web UI",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response is HTML\", function () {",
							"    pm.expect(pm.response.headers.get('Content-Type')).to.include('text/html');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/web",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"web"
					]
				},
				"description": "Access the web user interface for the URL shortener."
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/web",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"web"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "html",
					"header": [
						{
							"key": "Content-Type",
							"value": "text/html; charset=utf-8"
						}
					],
					"cookie": [],
					"body": "<!DOCTYPE html>\n<html>\n<head>\n    <title>URL Shortener</title>\n</head>\n<body>\n    <!-- Web UI content -->\n</body>\n</html>"
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "short_key",
			"value": "abc123",
			"type": "string"
		}
	]
}
